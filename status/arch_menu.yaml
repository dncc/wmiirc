status:
  arch_menu:
    params:
      menu_symbol: "\u2605"
      choices: [ suspend, hibernate, shutdown ]

    label: |
      [ :focus, @menu_symbol]

    script: |
      def call(choice)
         case choice
         when "suspend"   then system 'sudo pm-suspend'
         when "hibernate" then system 'sudo pm-hibernate'
         when "shutdown"  then system 'sudo shutdown -h now'
         end
      end

      event 'FocusTag' do |tag|
        @current_choice = tag
      end

      def current=choice
        call choice
      end

      def choose
        @current_choice = @menu_symbol
        if choice = click_menu(@choices, @current_choice)
          self.current = choice
        end
      end

    control:
      action:
        arch_menu: self.choose

      mouse_action:
        left_click: arch_menu
